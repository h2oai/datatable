dist: trusty
sudo: true

language: python

compiler:
  - gcc
  - clang

branches:
  only:
    - travis-ci

before_install:
  - ( wget -O llvm4.tar.xz "http://releases.llvm.org/4.0.0/clang+llvm-4.0.0-x86_64-linux-gnu-ubuntu-16.04.tar.xz" && mv llvm4.tar.xz $HOME/ && mkdir -p "$HOME/LLVM4" && tar xf "$HOME/llvm4.tar.xz" -C "$HOME/LLVM4" )
  - sudo cp $HOME/LLVM4/clang+llvm-4.0.0-x86_64-linux-gnu-ubuntu-16.04/lib/libomp.so /usr/lib

env:
  global:
  - LLVM4=$HOME/LLVM4/clang+llvm-4.0.0-x86_64-linux-gnu-ubuntu-16.04 LLVM_CONFIG=$HOME/LLVM4/clang+llvm-4.0.0-x86_64-linux-gnu-ubuntu-16.04/bin/llvm-config CLANG=$HOME/LLVM4/clang+llvm-4.0.0-x86_64-linux-gnu-ubuntu-16.04/bin/clang

cache:
    directories:
        - $LLVM4

python:
  - "3.5"
  - "3.6"

install:
  - pip install --upgrade pip
  - pip install --upgrade setuptools
  - pip install --upgrade python-dateutil
  - pip install --upgrade numpy
  - pip install --upgrade colorama
  - pip install --upgrade typesentry
  - pip install --upgrade wcwidth
  - pip install --upgrade blessed
  - pip install --upgrade llvmlite
  - pip install --upgrade psutil
  - pip install --upgrade pandas
  - pip install --upgrade pytest
  - pip install --upgrade virtualenv
  - pip install --upgrade wheel

script:
  - make test_install
  - make

git:
  depth: 5